{"mappings":"ACAA,IAAI,EAAS,GAAG,OAAO,CAAC,OAQxB,WAAW,gBAAgB,CAAC,QAAS,WACjC,iBAAiB,SAAS,CAAC,GAAG,CAAC,eAC/B,EAAO,IAAI,CAAC,cAChB,GAEA,WAAW,gBAAgB,CAAC,QAAS,WACjC,qBAAqB,SAAS,CAAC,GAAG,CAAC,eACnC,EAAO,IAAI,CAAC,mBAEZ,WAAW,KACP,iBAAiB,SAAS,CAAC,GAAG,CAAC,eAC/B,EAAO,IAAI,CAAC,eACZ,qBAAqB,SAAS,CAAC,GAAG,CAAC,eACnC,EAAO,IAAI,CAAC,kBAChB,EAAG,IACP,GAEA,cAAc,gBAAgB,CAAC,SAAU,WACrC,gBAAgB,SAAS,CAAC,GAAG,CAAC,eAC9B,EAAO,IAAI,CAAC,aAAc,IAAI,CAAC,KAAK,CACxC,GAEA,UAAU,gBAAgB,CAAC,QAAS,WAChC,EAAO,IAAI,CAAC,gBAChB,GAEA,YAAY,gBAAgB,CAAC,QAAS,WAClC,EAAO,IAAI,CAAC,kBAChB,GAEA,YAAY,gBAAgB,CAAC,QAAS,WAClC,SAAS,MAAM,EACnB,GAGA,YAAY,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GACpG,cAAc,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GACtG,eAAe,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GACvG,iBAAiB,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GACzG,iBAAiB,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GACzG,mBAAmB,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GAC3G,qBAAqB,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GAC7G,uBAAuB,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GAC/G,gBAAgB,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GACxG,kBAAkB,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GAC1G,qBAAqB,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GAC7G,uBAAuB,gBAAgB,CAAC,eAAgB,AAAC,IAAQ,EAAE,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,cAAgB,GAK/G,IAAI,EAAiB,KACjB,EAAa,KACjB,WAAW,KACP,qBAAqB,SAAS,CAAC,GAAG,CAAC,eACnC,EAAO,IAAI,CAAC,mBACZ,iBAAiB,SAAS,CAAC,GAAG,CAAC,eAC/B,EAAO,IAAI,CAAC,cAChB,EAAG,KAEH,EAAO,EAAE,CAAC,kBAAmB,SAAU,CAAG,EACtC,uBAAuB,SAAS,CAAC,GAAG,CAAC,eAGrC,EAAiB,EAEjB,gBAAgB,SAAS,CAAG,KAAK,SAAS,CAAC,GACb,cAA1B,EAAI,EAAE,CAAC,QAAQ,CAAC,KAAK,GACrB,UAAU,QAAQ,CAAG,CAAA,EACrB,YAAY,QAAQ,CAAG,CAAA,GAG3B,cAAc,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAI,GAAO,EAAI,cAAc,EAAI,EAAI,cAAc,CAAC,YAAY,CAAI,EAAI,cAAc,CAAC,YAAY,CAAG,IACzI,cAAc,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAI,GAAO,EAAI,cAAc,EAAI,EAAI,cAAc,CAAC,YAAY,CAAI,EAAI,cAAc,CAAC,YAAY,CAAG,IACzI,WAAW,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAI,GAAO,EAAI,cAAc,EAAI,EAAI,cAAc,CAAC,SAAS,CAAI,EAAI,cAAc,CAAC,SAAS,CAAG,IAChI,UAAU,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAI,GAAO,EAAI,cAAc,EAAI,EAAI,cAAc,CAAC,QAAQ,CAAI,EAAI,cAAc,CAAC,QAAQ,CAAG,GAEjI,GAEA,EAAO,EAAE,CAAC,cAAe,SAAU,CAAG,EAClC,mBAAmB,SAAS,CAAC,GAAG,CAAC,eAIjC,AADA,CAAA,EAAa,CAAb,EACW,IAAI,CAAC,CAAC,EAAG,IAAgB,EAAE,YAAY,CAAG,EAAE,YAAY,CAAI,GAAK,GAG5E,cAAc,SAAS,CAAG,gDAG1B,IAAI,EAAc,EAAW,MAAM,CAAC,AAAC,GAAe,EAAE,YAAY,CAAC,UAAU,CAAC,aAC9E,GAAI,EAAY,MAAM,CAAG,EAAG,CACxB,IAAI,EAAW,SAAS,aAAa,CAAC,WACtC,CAAA,EAAS,KAAK,CAAG,eACjB,EAAY,OAAO,CAAC,AAAC,IACjB,IAAI,EAAM,SAAS,aAAa,CAAC,SACjC,CAAA,EAAI,KAAK,CAAG,EAAO,QAAQ,CAC3B,EAAI,SAAS,CAAG,EAAO,YAAY,CACnC,EAAI,KAAK,CAAG,MAAQ,EAAO,YAAY,CACnC,GAAkB,EAAe,cAAc,EAAI,EAAe,cAAc,CAAC,QAAQ,GAAK,EAAO,QAAQ,EAC7G,EAAI,YAAY,CAAC,WAAY,YAEjC,EAAS,WAAW,CAAC,EACzB,GACA,cAAc,WAAW,CAAC,EAC9B,CAGA,IAAI,EAAe,EAAW,MAAM,CAAC,AAAC,GAAe,CAAC,EAAE,YAAY,CAAC,UAAU,CAAC,aAChF,GAAI,EAAa,MAAM,CAAG,EAAG,CACzB,IAAI,EAAW,SAAS,aAAa,CAAC,WACtC,CAAA,EAAS,KAAK,CAAG,gBACjB,EAAa,OAAO,CAAC,AAAC,IAClB,IAAI,EAAM,SAAS,aAAa,CAAC,SACjC,CAAA,EAAI,KAAK,CAAG,EAAO,QAAQ,CAC3B,EAAI,SAAS,CAAG,EAAO,YAAY,CACnC,EAAI,KAAK,CAAG,MAAQ,EAAO,YAAY,CACnC,GAAkB,EAAe,cAAc,EAAI,EAAe,cAAc,CAAC,QAAQ,GAAK,EAAO,QAAQ,EAC7G,EAAI,YAAY,CAAC,WAAY,YAEjC,EAAS,WAAW,CAAC,EACzB,GACA,cAAc,WAAW,CAAC,EAE9B,CAE0B,GAAtB,EAAY,MAAM,EAAS,AAAuB,GAAvB,EAAa,MAAM,EAC9C,CAAA,cAAc,SAAS,CAAG,yDAD9B,CAIJ,GAEA,EAAO,EAAE,CAAC,aAAc,SAAU,CAAG,EACjC,kBAAkB,SAAS,CAAC,GAAG,CAAC,eAEhC,qBAAqB,SAAS,CAAC,GAAG,CAAC,eACnC,EAAO,IAAI,CAAC,mBACZ,iBAAiB,SAAS,CAAC,GAAG,CAAC,eAC/B,EAAO,IAAI,CAAC,cAChB,GAEA,EAAO,EAAE,CAAC,kBAAmB,SAAU,CAAG,EACtC,uBAAuB,SAAS,CAAC,GAAG,CAAC,eACrC,cAAc,SAAS,CAAG,8DAC9B,GAEA,EAAO,EAAE,CAAC,QAAS,SAAU,CAAG,EAG5B,GAFA,cAAc,SAAS,CAAC,GAAG,CAAC,eAC5B,MAAM,SAAS,CAAG,KAAK,SAAS,CAAC,GAC7B,GAAO,EAAI,cAAc,EAAI,EAAI,iBAAiB,CAAE,CACpD,IAAI,EAAgB,EAAK,cAAc,EAAI,EAAI,iBAAiB,CAAI,KAAK,KAAK,CAAE,AAAA,CAAA,EAAI,cAAc,CAAG,EAAI,iBAAgB,AAAhB,EAAqB,KAAQ,CACtI,CAAA,eAAe,SAAS,CAAG,EAAgB,GAC/C,MAEI,eAAe,SAAS,CAAG,EAEnC,GAEA,EAAO,EAAE,CAAC,WAAY,SAAU,CAAG,EAC/B,iBAAiB,SAAS,CAAC,GAAG,CAAC,eAC/B,SAAS,SAAS,CAAG,KAAK,SAAS,CAAC,GACpC,OAAO,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAI,GAAO,EAAI,aAAa,EAAI,EAAI,aAAa,CAAC,WAAW,CAAI,EAAI,aAAa,CAAC,WAAW,CAAG,IAC7H,QAAQ,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAI,GAAO,EAAI,aAAa,EAAI,EAAI,aAAa,CAAC,cAAc,CAAI,EAAI,aAAa,CAAC,cAAc,CAAG,IACpI,OAAO,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAI,GAAO,EAAI,aAAa,EAAI,EAAI,aAAa,CAAC,aAAa,CAAI,EAAI,aAAa,CAAC,aAAa,CAAG,IACjI,aAAa,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAI,GAAO,EAAI,aAAa,EAAI,EAAI,aAAa,CAAC,mBAAmB,CAAI,EAAI,aAAa,CAAC,mBAAmB,CAAG,IACnJ,UAAU,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAI,GAAO,EAAI,aAAa,EAAI,EAAI,aAAa,CAAC,cAAc,CAAI,EAAI,aAAa,CAAC,cAAc,CAAG,GAC1I","sources":["<anon>","src/js/debug.js"],"sourcesContent":["var $4165fb5e9d27a5f7$exports = {};\nvar $4165fb5e9d27a5f7$var$socket = io.connect(':80');\n// DEBUG\n// var state = document.getElementById(\"state\");\n// var btn = document.getElementById(\"btn\");\n// UI event listeners\nbtnDevices.addEventListener(\"click\", function() {\n    tickDevicesGetUp.classList.add(\"tickAnimate\");\n    $4165fb5e9d27a5f7$var$socket.emit(\"devices-get\");\n});\nbtnRefresh.addEventListener(\"click\", function() {\n    tickDevicesRefreshUp.classList.add(\"tickAnimate\");\n    $4165fb5e9d27a5f7$var$socket.emit(\"devices-refresh\");\n    // Wait for discovery to finish\n    setTimeout(()=>{\n        tickDevicesGetUp.classList.add(\"tickAnimate\");\n        $4165fb5e9d27a5f7$var$socket.emit(\"devices-get\");\n        tickServerSettingsUp.classList.add(\"tickAnimate\");\n        $4165fb5e9d27a5f7$var$socket.emit(\"server-settings\");\n    }, 5000);\n});\ndeviceChoices.addEventListener(\"change\", function() {\n    tickDeviceSetUp.classList.add(\"tickAnimate\");\n    $4165fb5e9d27a5f7$var$socket.emit(\"device-set\", this.value);\n});\nbtnReboot.addEventListener(\"click\", function() {\n    $4165fb5e9d27a5f7$var$socket.emit(\"server-reboot\");\n});\nbtnShutdown.addEventListener(\"click\", function() {\n    $4165fb5e9d27a5f7$var$socket.emit(\"server-shutdown\");\n});\nbtnReloadUI.addEventListener(\"click\", function() {\n    location.reload();\n});\n// Remove tickAnimate from animated ticks\ntickStateUp.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickStateDown.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickMetadataUp.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickMetadataDown.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickDevicesGetUp.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickDevicesGetDown.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickDevicesRefreshUp.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickDevicesRefreshDown.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickDeviceSetUp.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickDeviceSetDown.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickServerSettingsUp.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\ntickServerSettingsDown.addEventListener(\"animationend\", (e)=>{\n    e.srcElement.classList.remove(\"tickAnimate\");\n});\n// Sockets\n// Initial calls, wait a bit for socket to start\nvar $4165fb5e9d27a5f7$var$serverSettings = null;\nvar $4165fb5e9d27a5f7$var$deviceList = null;\nsetTimeout(()=>{\n    tickServerSettingsUp.classList.add(\"tickAnimate\");\n    $4165fb5e9d27a5f7$var$socket.emit(\"server-settings\");\n    tickDevicesGetUp.classList.add(\"tickAnimate\");\n    $4165fb5e9d27a5f7$var$socket.emit(\"devices-get\");\n}, 500);\n$4165fb5e9d27a5f7$var$socket.on(\"server-settings\", function(msg) {\n    tickServerSettingsDown.classList.add(\"tickAnimate\");\n    // Store server settings\n    $4165fb5e9d27a5f7$var$serverSettings = msg;\n    sServerSettings.innerHTML = JSON.stringify(msg);\n    if (msg.os.userInfo.shell === \"/bin/bash\") {\n        btnReboot.disabled = false;\n        btnShutdown.disabled = false;\n    }\n    sFriendlyname.children[0].innerText = msg && msg.selectedDevice && msg.selectedDevice.friendlyName ? msg.selectedDevice.friendlyName : \"-\";\n    sManufacturer.children[0].innerText = msg && msg.selectedDevice && msg.selectedDevice.manufacturer ? msg.selectedDevice.manufacturer : \"-\";\n    sModelName.children[0].innerText = msg && msg.selectedDevice && msg.selectedDevice.modelName ? msg.selectedDevice.modelName : \"-\";\n    sLocation.children[0].innerText = msg && msg.selectedDevice && msg.selectedDevice.location ? msg.selectedDevice.location : \"-\";\n});\n$4165fb5e9d27a5f7$var$socket.on(\"devices-get\", function(msg) {\n    tickDevicesGetDown.classList.add(\"tickAnimate\");\n    // Store and sort device list\n    $4165fb5e9d27a5f7$var$deviceList = msg;\n    $4165fb5e9d27a5f7$var$deviceList.sort((a, b)=>{\n        return a.friendlyName < b.friendlyName ? -1 : 1;\n    });\n    // Clear choices\n    deviceChoices.innerHTML = \"<option value=\\\"\\\">Select a device...</em></li>\";\n    // Add WiiM devices\n    var devicesWiiM = $4165fb5e9d27a5f7$var$deviceList.filter((d)=>{\n        return d.manufacturer.startsWith(\"Linkplay\");\n    });\n    if (devicesWiiM.length > 0) {\n        var optGroup = document.createElement(\"optgroup\");\n        optGroup.label = \"WiiM devices\";\n        devicesWiiM.forEach((device)=>{\n            var opt = document.createElement(\"option\");\n            opt.value = device.location;\n            opt.innerText = device.friendlyName;\n            opt.title = \"By \" + device.manufacturer;\n            if ($4165fb5e9d27a5f7$var$serverSettings && $4165fb5e9d27a5f7$var$serverSettings.selectedDevice && $4165fb5e9d27a5f7$var$serverSettings.selectedDevice.location === device.location) opt.setAttribute(\"selected\", \"selected\");\n            optGroup.appendChild(opt);\n        });\n        deviceChoices.appendChild(optGroup);\n    }\n    // Other devices\n    var devicesOther = $4165fb5e9d27a5f7$var$deviceList.filter((d)=>{\n        return !d.manufacturer.startsWith(\"Linkplay\");\n    });\n    if (devicesOther.length > 0) {\n        var optGroup = document.createElement(\"optgroup\");\n        optGroup.label = \"Other devices\";\n        devicesOther.forEach((device)=>{\n            var opt = document.createElement(\"option\");\n            opt.value = device.location;\n            opt.innerText = device.friendlyName;\n            opt.title = \"By \" + device.manufacturer;\n            if ($4165fb5e9d27a5f7$var$serverSettings && $4165fb5e9d27a5f7$var$serverSettings.selectedDevice && $4165fb5e9d27a5f7$var$serverSettings.selectedDevice.location === device.location) opt.setAttribute(\"selected\", \"selected\");\n            optGroup.appendChild(opt);\n        });\n        deviceChoices.appendChild(optGroup);\n    }\n    if (devicesWiiM.length == 0 && devicesOther.length == 0) deviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">No devices found!</em></li>\";\n});\n$4165fb5e9d27a5f7$var$socket.on(\"device-set\", function(msg) {\n    tickDeviceSetDown.classList.add(\"tickAnimate\");\n    // Device wissel? Haal 'alles' opnieuw op\n    tickServerSettingsUp.classList.add(\"tickAnimate\");\n    $4165fb5e9d27a5f7$var$socket.emit(\"server-settings\");\n    tickDevicesGetUp.classList.add(\"tickAnimate\");\n    $4165fb5e9d27a5f7$var$socket.emit(\"devices-get\");\n});\n$4165fb5e9d27a5f7$var$socket.on(\"devices-refresh\", function(msg) {\n    tickDevicesRefreshDown.classList.add(\"tickAnimate\");\n    deviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">Waiting for devices...</em></li>\";\n});\n$4165fb5e9d27a5f7$var$socket.on(\"state\", function(msg) {\n    tickStateDown.classList.add(\"tickAnimate\");\n    state.innerHTML = JSON.stringify(msg);\n    if (msg && msg.stateTimeStamp && msg.metadataTimeStamp) {\n        var timeStampDiff = msg.stateTimeStamp && msg.metadataTimeStamp ? Math.round((msg.stateTimeStamp - msg.metadataTimeStamp) / 1000) : 0;\n        sTimeStampDiff.innerHTML = timeStampDiff + \"s\";\n    } else sTimeStampDiff.innerHTML = \"\";\n});\n$4165fb5e9d27a5f7$var$socket.on(\"metadata\", function(msg) {\n    tickMetadataDown.classList.add(\"tickAnimate\");\n    metadata.innerHTML = JSON.stringify(msg);\n    sTitle.children[0].innerText = msg && msg.trackMetaData && msg.trackMetaData[\"dc:title\"] ? msg.trackMetaData[\"dc:title\"] : \"-\";\n    sArtist.children[0].innerText = msg && msg.trackMetaData && msg.trackMetaData[\"upnp:artist\"] ? msg.trackMetaData[\"upnp:artist\"] : \"-\";\n    sAlbum.children[0].innerText = msg && msg.trackMetaData && msg.trackMetaData[\"upnp:album\"] ? msg.trackMetaData[\"upnp:album\"] : \"-\";\n    sAlbumArtUri.children[0].innerText = msg && msg.trackMetaData && msg.trackMetaData[\"upnp:albumArtURI\"] ? msg.trackMetaData[\"upnp:albumArtURI\"] : \"-\";\n    sSubtitle.children[0].innerText = msg && msg.trackMetaData && msg.trackMetaData[\"dc:subtitle\"] ? msg.trackMetaData[\"dc:subtitle\"] : \"-\";\n});\n\n\n//# sourceMappingURL=debug.c0024778.js.map\n","var socket = io.connect(':80');\r\n\r\n// DEBUG\r\n// var state = document.getElementById(\"state\");\r\n// var btn = document.getElementById(\"btn\");\r\n\r\n// UI event listeners\r\n\r\nbtnDevices.addEventListener(\"click\", function () {\r\n    tickDevicesGetUp.classList.add(\"tickAnimate\");\r\n    socket.emit(\"devices-get\");\r\n});\r\n\r\nbtnRefresh.addEventListener(\"click\", function () {\r\n    tickDevicesRefreshUp.classList.add(\"tickAnimate\");\r\n    socket.emit(\"devices-refresh\");\r\n    // Wait for discovery to finish\r\n    setTimeout(() => {\r\n        tickDevicesGetUp.classList.add(\"tickAnimate\");\r\n        socket.emit(\"devices-get\");\r\n        tickServerSettingsUp.classList.add(\"tickAnimate\");\r\n        socket.emit(\"server-settings\");\r\n    }, 5000);\r\n});\r\n\r\ndeviceChoices.addEventListener(\"change\", function () {\r\n    tickDeviceSetUp.classList.add(\"tickAnimate\");\r\n    socket.emit(\"device-set\", this.value);\r\n})\r\n\r\nbtnReboot.addEventListener(\"click\", function () {\r\n    socket.emit(\"server-reboot\");\r\n});\r\n\r\nbtnShutdown.addEventListener(\"click\", function () {\r\n    socket.emit(\"server-shutdown\");\r\n});\r\n\r\nbtnReloadUI.addEventListener(\"click\", function () {\r\n    location.reload();\r\n})\r\n\r\n// Remove tickAnimate from animated ticks\r\ntickStateUp.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickStateDown.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickMetadataUp.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickMetadataDown.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickDevicesGetUp.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickDevicesGetDown.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickDevicesRefreshUp.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickDevicesRefreshDown.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickDeviceSetUp.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickDeviceSetDown.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickServerSettingsUp.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\ntickServerSettingsDown.addEventListener(\"animationend\", (e) => { e.srcElement.classList.remove(\"tickAnimate\"); });\r\n\r\n// Sockets\r\n\r\n// Initial calls, wait a bit for socket to start\r\nvar serverSettings = null;\r\nvar deviceList = null;\r\nsetTimeout(() => {\r\n    tickServerSettingsUp.classList.add(\"tickAnimate\");\r\n    socket.emit(\"server-settings\");\r\n    tickDevicesGetUp.classList.add(\"tickAnimate\");\r\n    socket.emit(\"devices-get\");\r\n}, 500);\r\n\r\nsocket.on(\"server-settings\", function (msg) {\r\n    tickServerSettingsDown.classList.add(\"tickAnimate\");\r\n\r\n    // Store server settings\r\n    serverSettings = msg;\r\n\r\n    sServerSettings.innerHTML = JSON.stringify(msg);\r\n    if (msg.os.userInfo.shell === \"/bin/bash\") { // RPi has bash, so possibly able to reboot/shutdown.\r\n        btnReboot.disabled = false;\r\n        btnShutdown.disabled = false;\r\n    };\r\n\r\n    sFriendlyname.children[0].innerText = (msg && msg.selectedDevice && msg.selectedDevice.friendlyName) ? msg.selectedDevice.friendlyName : \"-\";\r\n    sManufacturer.children[0].innerText = (msg && msg.selectedDevice && msg.selectedDevice.manufacturer) ? msg.selectedDevice.manufacturer : \"-\";\r\n    sModelName.children[0].innerText = (msg && msg.selectedDevice && msg.selectedDevice.modelName) ? msg.selectedDevice.modelName : \"-\";\r\n    sLocation.children[0].innerText = (msg && msg.selectedDevice && msg.selectedDevice.location) ? msg.selectedDevice.location : \"-\";\r\n\r\n});\r\n\r\nsocket.on(\"devices-get\", function (msg) {\r\n    tickDevicesGetDown.classList.add(\"tickAnimate\");\r\n\r\n    // Store and sort device list\r\n    deviceList = msg;\r\n    deviceList.sort((a, b) => { return (a.friendlyName < b.friendlyName) ? -1 : 1 });\r\n\r\n    // Clear choices\r\n    deviceChoices.innerHTML = \"<option value=\\\"\\\">Select a device...</em></li>\";\r\n\r\n    // Add WiiM devices\r\n    var devicesWiiM = deviceList.filter((d) => { return d.manufacturer.startsWith(\"Linkplay\") });\r\n    if (devicesWiiM.length > 0) {\r\n        var optGroup = document.createElement(\"optgroup\");\r\n        optGroup.label = \"WiiM devices\";\r\n        devicesWiiM.forEach((device) => {\r\n            var opt = document.createElement(\"option\");\r\n            opt.value = device.location;\r\n            opt.innerText = device.friendlyName;\r\n            opt.title = \"By \" + device.manufacturer;\r\n            if (serverSettings && serverSettings.selectedDevice && serverSettings.selectedDevice.location === device.location) {\r\n                opt.setAttribute(\"selected\", \"selected\");\r\n            };\r\n            optGroup.appendChild(opt);\r\n        })\r\n        deviceChoices.appendChild(optGroup);\r\n    };\r\n\r\n    // Other devices\r\n    var devicesOther = deviceList.filter((d) => { return !d.manufacturer.startsWith(\"Linkplay\") });\r\n    if (devicesOther.length > 0) {\r\n        var optGroup = document.createElement(\"optgroup\");\r\n        optGroup.label = \"Other devices\";\r\n        devicesOther.forEach((device) => {\r\n            var opt = document.createElement(\"option\");\r\n            opt.value = device.location;\r\n            opt.innerText = device.friendlyName;\r\n            opt.title = \"By \" + device.manufacturer;\r\n            if (serverSettings && serverSettings.selectedDevice && serverSettings.selectedDevice.location === device.location) {\r\n                opt.setAttribute(\"selected\", \"selected\");\r\n            };\r\n            optGroup.appendChild(opt);\r\n        })\r\n        deviceChoices.appendChild(optGroup);\r\n\r\n    };\r\n\r\n    if (devicesWiiM.length == 0 && devicesOther.length == 0) {\r\n        deviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">No devices found!</em></li>\";\r\n    };\r\n\r\n});\r\n\r\nsocket.on(\"device-set\", function (msg) {\r\n    tickDeviceSetDown.classList.add(\"tickAnimate\");\r\n    // Device wissel? Haal 'alles' opnieuw op\r\n    tickServerSettingsUp.classList.add(\"tickAnimate\");\r\n    socket.emit(\"server-settings\");\r\n    tickDevicesGetUp.classList.add(\"tickAnimate\");\r\n    socket.emit(\"devices-get\");\r\n});\r\n\r\nsocket.on(\"devices-refresh\", function (msg) {\r\n    tickDevicesRefreshDown.classList.add(\"tickAnimate\");\r\n    deviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">Waiting for devices...</em></li>\";\r\n});\r\n\r\nsocket.on(\"state\", function (msg) {\r\n    tickStateDown.classList.add(\"tickAnimate\");\r\n    state.innerHTML = JSON.stringify(msg);\r\n    if (msg && msg.stateTimeStamp && msg.metadataTimeStamp) {\r\n        var timeStampDiff = (msg.stateTimeStamp && msg.metadataTimeStamp) ? Math.round((msg.stateTimeStamp - msg.metadataTimeStamp) / 1000) : 0;\r\n        sTimeStampDiff.innerHTML = timeStampDiff + \"s\";\r\n    }\r\n    else {\r\n        sTimeStampDiff.innerHTML = \"\";\r\n    }\r\n});\r\n\r\nsocket.on(\"metadata\", function (msg) {\r\n    tickMetadataDown.classList.add(\"tickAnimate\");\r\n    metadata.innerHTML = JSON.stringify(msg);\r\n    sTitle.children[0].innerText = (msg && msg.trackMetaData && msg.trackMetaData[\"dc:title\"]) ? msg.trackMetaData[\"dc:title\"] : \"-\";\r\n    sArtist.children[0].innerText = (msg && msg.trackMetaData && msg.trackMetaData[\"upnp:artist\"]) ? msg.trackMetaData[\"upnp:artist\"] : \"-\";\r\n    sAlbum.children[0].innerText = (msg && msg.trackMetaData && msg.trackMetaData[\"upnp:album\"]) ? msg.trackMetaData[\"upnp:album\"] : \"-\";\r\n    sAlbumArtUri.children[0].innerText = (msg && msg.trackMetaData && msg.trackMetaData[\"upnp:albumArtURI\"]) ? msg.trackMetaData[\"upnp:albumArtURI\"] : \"-\";\r\n    sSubtitle.children[0].innerText = (msg && msg.trackMetaData && msg.trackMetaData[\"dc:subtitle\"]) ? msg.trackMetaData[\"dc:subtitle\"] : \"-\";\r\n});\r\n"],"names":["$4165fb5e9d27a5f7$var$socket","io","connect","btnDevices","addEventListener","tickDevicesGetUp","classList","add","emit","btnRefresh","tickDevicesRefreshUp","setTimeout","tickServerSettingsUp","deviceChoices","tickDeviceSetUp","value","btnReboot","btnShutdown","btnReloadUI","location","reload","tickStateUp","e","srcElement","remove","tickStateDown","tickMetadataUp","tickMetadataDown","tickDevicesGetDown","tickDevicesRefreshDown","tickDeviceSetDown","tickServerSettingsDown","$4165fb5e9d27a5f7$var$serverSettings","$4165fb5e9d27a5f7$var$deviceList","on","msg","sServerSettings","innerHTML","JSON","stringify","os","userInfo","shell","disabled","sFriendlyname","children","innerText","selectedDevice","friendlyName","sManufacturer","manufacturer","sModelName","modelName","sLocation","sort","a","b","devicesWiiM","filter","d","startsWith","length","optGroup","document","createElement","label","forEach","device","opt","title","setAttribute","appendChild","devicesOther","state","stateTimeStamp","metadataTimeStamp","timeStampDiff","Math","round","sTimeStampDiff","metadata","sTitle","trackMetaData","sArtist","sAlbum","sAlbumArtUri","sSubtitle"],"version":3,"file":"debug.c0024778.js.map"}